:root{
--shop-x:14%; --shop-y:22%;
--lore-x:50%; --lore-y:26%;
--music-x:72%; --music-y:18%;
}

/* ===== GLOBAL BASE ===== */
html,body{
  cursor:none;
  height:100%;
  margin:0;
  background:#000;
  overflow:hidden;
}

.backdrop{
  position:fixed;
  inset:0;
  background:url(assets/landing.png) center/cover no-repeat;
  filter:blur(26px) brightness(.9);
  transform:scale(1.05);
}

.stage{position:fixed;inset:0;display:grid;place-items:center;}
.art{width:100vw;height:100vh;object-fit:contain;}

/* ================================================= */
/* ================= LORE PAGE ===================== */
/* ================================================= */

.lore-body{
  margin:0;
  overflow:hidden;
  background:#000;
}

.lore-stage{
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
}

/* Background book image */
.lore-art{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  pointer-events:none;
  z-index:1;
}

/* LEFT PAGE */
.lore-left{
  position:absolute;
  left:20%;
  top:20%;
  width:24%;
  height:55%;

  padding:22px 26px;

  overflow-y:auto;
  overflow-x:hidden;

  box-sizing:border-box;
  word-break:break-word;

  z-index:10;
}

/* RIGHT PAGE */
.lore-right{
  position:absolute;
  left:56%;
  top:20%;
  width:24%;
  height:55%;

  padding:22px 26px;

  overflow-y:auto;
  overflow-x:hidden;

  box-sizing:border-box;
  word-break:break-word;

  z-index:10;
}



/* Scrollbar subtle */
.lore-left::-webkit-scrollbar,
.lore-right::-webkit-scrollbar{
  width:6px;
}

.lore-left::-webkit-scrollbar-thumb,
.lore-right::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.2);
  border-radius:6px;
}

/* Navigation arrows */
.lore-prev,
.lore-next{
  position:absolute;
  top:80%;
  font-size:28px;
  background:none;
  border:none;
  color:white;
  cursor:pointer;
  z-index:20;
}

.lore-prev{ left:42%; }
.lore-next{ left:55%; }

/* Page number */
.lore-pg{
  position:absolute;
  bottom:9%;
  left:50%;
  transform:translateX(-50%);
  color:white;
  font-family:monospace;
  font-size:14px;
  z-index:20;
}

/* ================================================= */
/* ============== LANDING PAGE ===================== */
/* ================================================= */

.label{position:absolute;transform:translate(-50%,-50%);}
.label img{
  width:14vw;
  max-width:260px;
  min-width:120px;
  filter:drop-shadow(0 0 8px rgba(160,90,255,.55));
  transition: transform .18s ease, filter .18s ease, opacity .18s ease;
  opacity:.98;
}

.label-shop img{ transform:scale(0.67); }
.label-lore img{ transform:scale(0.67); }
.label-music img{ transform:scale(2.00); }

.label-shop:hover img,
.label-lore:hover img{
  transform:scale(0.70);
  filter:drop-shadow(0 0 10px rgba(255,255,255,.20))
         drop-shadow(0 0 22px rgba(160,90,255,.65));
}

.label-music:hover img{
  transform:scale(2.06);
  filter:drop-shadow(0 0 12px rgba(255,255,255,.25))
         drop-shadow(0 0 30px rgba(160,90,255,.75));
  opacity:1;
}

.label-shop{left:var(--shop-x);top:var(--shop-y);}
.label-lore{left:var(--lore-x);top:var(--lore-y);}
.label-music{left:var(--music-x);top:var(--music-y);}

.zone{position:absolute;background:transparent;}
.zone-shop{left:2%;top:28%;width:28%;height:62%;}
.zone-lore{left:28%;top:20%;width:38%;height:78%;}
.zone-music{left:66%;top:20%;width:32%;height:78%;}

/* ================================================= */
/* ============== RUNE SPILL ======================= */
/* ================================================= */

.rune-spill{
  position:fixed;
  left:0; top:0;
  pointer-events:none;
  z-index:99999;
}

.rune-particle{
  position:absolute;
  font-size:14px;
  color:rgba(255,255,255,.85);
  text-shadow:0 0 10px rgba(160,90,255,.85),
              0 0 22px rgba(90,220,255,.35);
  animation:runeDrift 700ms ease-out forwards;
}

@keyframes runeDrift{
  0%{ transform: translate(0,0) scale(.95); opacity:0; }
  15%{ opacity:1; }
  100%{
    transform: translate(var(--dx), var(--dy)) scale(1.05);
    opacity:0;
  }
}

/* ================================================= */
/* ================= MUSIC PAGE ==================== */
/* ================================================= */

.music-stage{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
}

.music-art{
  width:100vw;
  height:100vh;
  object-fit:contain;
  display:block;
}

/* PLAY BUTTONS */
.play-btn{
  position:absolute;
  width:44px;
  height:44px;
  transform: translate(-50%,-50%);
  border-radius:14px;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 8px 22px rgba(0,0,0,.25);
}
.play-btn img{
  width:22px;
  height:22px;
  image-rendering: pixelated;
  transform: translateX(1px);
  opacity:.95;
  filter: drop-shadow(0 0 10px rgba(160,90,255,.65));
}
/* ===== ORIGINAL RUNE HALO ===== */

.play-btn::after{
  content:"ᚠᚢᚦᚨᚱᚲᚷ";
  position:absolute;
  inset:-10px;
  font-size:12px;
  letter-spacing:3px;
  opacity:.60;
  color:rgba(255,255,255,.92);
  text-shadow:
    0 0 8px rgba(160,90,255,.95),
    0 0 18px rgba(90,220,255,.50);
  animation:runeHalo 2.8s linear infinite;
  pointer-events:none;
}

@keyframes runeHalo{
  0%{ transform: rotate(0deg) scale(.95); opacity:.50; }
  50%{ transform: rotate(180deg) scale(1.06); opacity:.85; }
  100%{ transform: rotate(360deg) scale(.95); opacity:.50; }
}

/* Play button positions */
.pb1{left:34.822%; top:22.644%;}
.pb2{left:74.486%; top:29.925%;}
.pb3{left:33.310%; top:38.220%;}
.pb4{left:68.907%; top:43.026%;}
.pb5{left:62.279%; top:53.231%;}
.pb6{left:40.117%; top:55.368%;}
.pb7{left:52.741%; top:58.222%;}

#rune-layer{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:5;
}

.rune{
  position:absolute;
  font-size:18px;
  opacity:0;
  filter:
    drop-shadow(0 0 10px rgba(140,90,255,.75))
    drop-shadow(0 0 22px rgba(0,255,255,.30));
  animation:runeFloat var(--dur) ease-out forwards;
  transform: translate(-50%,-50%);
}

@keyframes runeFloat{
  0%{
    opacity:0;
    transform: translate(-50%,-50%) translate(0,0) scale(0.9);
  }
  12%{ opacity:.75; }
  100%{
    opacity:0;
    transform: translate(-50%,-50%) translate(var(--dx), var(--dy)) scale(1.08);
  }
}

/* ================================================= */
/* ================= BACK BUTTON =================== */
/* ================================================= */

.back-btn{
  position:fixed;
  left:18px;
  top:16px;
  z-index:99999;
  padding:10px 14px;
  background:#cfd2d8;
  border:2px solid #ffffff;
  box-shadow:0 0 0 2px #9aa0aa,
             0 0 12px rgba(200,220,255,.35);
  color:#111;
  text-decoration:none;
  font-weight:700;
  font-family: monospace;
  letter-spacing:1px;
}
/* ========================================= */
/* ===== LORE DESKTOP HARD CONTAINMENT ===== */
/* ========================================= */

.lore-stage{
  overflow:hidden; /* nothing can escape the book */
}

/* Left page container */
.lore-left,
.lore-right{
  position:absolute;
  overflow-y:auto;
  overflow-x:hidden;
  box-sizing:border-box;
  max-height:100%;
  word-break:break-word;
  z-index:10;
}

/* Prevent child overflow */
.lore-left *,
.lore-right *{
  max-width:100%;
  box-sizing:border-box;
}

/* Images & videos locked inside */
.lore-left img,
.lore-right img,
.lore-left video,
.lore-right video{
  max-width:100%;
  height:auto;
  display:block;
}

/* Hide scrollbars visually but keep scroll */
.lore-left::-webkit-scrollbar,
.lore-right::-webkit-scrollbar{
  width:6px;
}

.lore-left::-webkit-scrollbar-thumb,
.lore-right::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.25);
  border-radius:6px;
}
/* ================================= */
/* ===== LORE BUTTON VISIBILITY ==== */
/* ================================= */

.lore-prev,
.lore-next{
  position:absolute;
  z-index:25;
  font-size:28px;
  font-weight:700;
  color:#ffffff;
  background:rgba(0,0,0,0.55);
  border:1px solid rgba(255,255,255,0.25);
  padding:6px 14px;
  border-radius:6px;
  backdrop-filter:blur(6px);
  cursor:pointer;
  transition:all .15s ease;
}

.lore-prev:hover,
.lore-next:hover{
  background:rgba(0,0,0,0.75);
  box-shadow:0 0 12px rgba(255,255,255,0.35);
}

/* Positioning (adjust if needed slightly) */
.lore-prev{
  left:22%;
  bottom:14%;
}

.lore-next{
  right:22%;
  bottom:14%;
}

/* Page number styling */
.lore-pg{
  position:absolute;
  bottom:10%;
  left:50%;
  transform:translateX(-50%);
  z-index:25;
  font-family:monospace;
  font-size:14px;
  letter-spacing:2px;
  color:#ffffff;
  background:rgba(0,0,0,0.55);
  padding:4px 10px;
  border-radius:4px;
}
/* ===== LORE TEXT VISIBILITY FIX ===== */

.lore-left,
.lore-right{
  color: #f5f5f5;             /* visible on dark background */
  font-family: serif;
  font-size: 16px;
  line-height: 1.6;
  text-shadow: 0 0 6px rgba(0,0,0,.6);
}

.lore-text{
  white-space: pre-wrap;      /* preserve line breaks */
  word-break: break-word;
}

.lore-caption{
  font-size: 13px;
  opacity: .7;
  margin-top: 6px;
}
body{
  min-width:1100px;
}
/* ================================= */
/* ===== TRACK POPUP RESTORE ======= */
/* ================================= */

.track-popup{
  position:fixed;
  left:14%;
  top:20%;
  transform:translate(-50%,-50%);
  z-index:99999;

  display:none;
  flex-direction:column;
  align-items:flex-start;

  max-width:260px;
  padding:14px 16px;

  background: rgba(10,10,12,.78);
  border:1px solid rgba(255,255,255,.25);
  border-radius:16px;

  box-shadow:
    0 10px 26px rgba(0,0,0,.55),
    inset 0 0 0 1px rgba(160,90,255,.25);

  color:#fff;
  font-family:monospace;
  font-size:12px;
  backdrop-filter:blur(12px);
}

.track-popup.show{
  display:flex;
}

.track-title{
  font-size:13px;
  font-weight:700;
  letter-spacing:1px;
  margin-bottom:6px;
}

.track-label{
  font-size:11px;
  letter-spacing:2px;
  opacity:.65;
}

.track-bar{
  margin-top:8px;
  height:6px;
  border-radius:999px;
  background:rgba(255,255,255,.10);
  overflow:hidden;
  width:100%;
}

.track-bar > i{
  display:block;
  height:100%;
  width:0%;
  background:rgba(220,240,255,.65);
}
/* ================= SHOP PAGE HARD RESET ================= */

body.shop-page {
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  display: block !important;
  height: 100vh !important;
  width: 100vw !important;
}

.shop-stage {
  position: fixed !important;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
}

.shop-art {
  width: 100vw !important;
  height: 100vh !important;
  object-fit: fill !important;
  display: block;
}

.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 999;
}


/* ================= ITEM FRAME (EXACT IMAGE-MAP LOCK) ================= */

.item-frame {
  position: fixed;

  left: 31vw;

  /* Lock the top exactly where your grey mark is */
  top: 34vh;          /* adjust 1vh up/down if needed */

  width: 29vw;
  height: 66vh;

  transform: translateX(-50%);
  z-index: 10;
  pointer-events: none;
}
.frame-border {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

.item-image {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 75%;
  height: auto;
  transform: translate(-50%, -50%);
  object-fit: contain;
  pointer-events: none;
}


/* ================= CHANGE BUTTON ================= */

.change-btn {
  position: fixed;
  left: 62vw;          /* right-side empty zone */
  bottom: 12vh;

  transform: translateX(-50%);
  padding: 10px 20px;
  background: black;
  color: #ffe600;
  border: 2px solid #ffe600;
  font-family: monospace;
  cursor: pointer;
  z-index: 20;
  transition: 0.2s ease;
}

.change-btn:hover {
  background: #ffe600;
  color: black;
}
